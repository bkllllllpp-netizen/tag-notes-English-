## 变更日志 (Changelog)
- v1.3 (2025-10-29): Added AI study assistant (DeepSeek) with tag/global chat, plus tag cloud rename/delete and note card delete actions.
- v1.2 · 2025-10-26：首页标签云默认展示全部标签，点击任意标签可跳转到该标签关联的笔记列表，完成标签与笔记视图的联动体验�?
- v1.1 · 2025-10-25：在现有规划基础上补充标签首页、标签列表与笔记编辑视图的交互细节，明确键盘/手写双模式与行内标签联动逻辑，修正用词与结构让整体方案更加一致�?
- v1.0 · 2025-10-20：输出初始产品目标与三大视图的草案�?

# 总体目标
- 打造一个以标签为核心的网页笔记应用，让用户通过 `#标签` 结构化内容并快速检索�?
- 在同一编辑器里无缝切换键盘富文本与手写输入，为鼠标、触控笔等多种输入设备提供顺畅体验�?
- 支持标签的自动创建、管理与跨视图同步，确保新建标签能即时体现在首页标签云与笔记列表筛选中�?

# 设计原则
- **现代极简**：白/米白基底搭配半透明玻璃态卡片，标签使用高饱和胶囊色块突出层次�?
- **高响应�?*：交互反馈迅速，如按钮悬浮、模式切换、手写笔迹绘制均要即时呈现�?
- **一致的信息层级**：三大视图共用顶部标题栏和右下角悬浮新建按钮，维持操作心智�?
- **可扩展�?*：为未来接入后端 API 和更多编辑功能预留空间（如同步状态、分享、版本切换）�?

# 界面元素

## 1. 首页（标签视图）
- **全局标题�?*：顶部显示“我的笔记”，左侧保留返回按钮位（首页隐藏），右侧可放同步/删除等状态控件�?
- **搜索与过�?*：标题下方提供标签搜索框或筛选器，帮助快速定位标签�?
- **标签云区�?*：主体区域以胶囊形彩色标签展示所有标签；标签内含名称与计数，悬浮时有轻微动效�?
- **引导文案**：当标签较少时显示提示信息，说明如何在笔记中通过 `#` 创建标签�?
- **“新建文件”悬浮按�?*：页面右下角固定圆形 �?�?FAB，点击后进入全新笔记编辑页面�?

## 2. 标签文件列表视图
- **返回按钮**：标题栏左上角显示返回箭头，引导用户回到首页标签云�?
- **页面标题**：显示当前标签名称（如�? 灵感”），并标出笔记数量、最近更新时间等元信息�?
- **筛�?Chips**：在标题右侧提供排序或过滤（最�?最�?含手写等），当前选项高亮�?
- **笔记列表**：垂直卡片列出与该标签关联的笔记，每条卡片包含标题、内容摘要、更新时间、字数与标签组�?
- **空态提�?*：若某标签暂无笔记，展示引导语并提示使用右下角按钮新建�?
- **悬浮新建按钮**：与首页一致，确保在列表视图也能随时创建笔记�?

## 3. 笔记编辑视图
- **返回按钮**：根据来源返回列表或首页，维持层级一致�?
- **笔记标题�?*：顶部显示笔记标题（可编辑或展示），旁边标记当前模式、保存状态�?
- **工具栏（极简�?*：包含“保存”“信息”“分享”“删除”等轻量按钮，并在右上角显示保存/同步反馈�?
- **模式切换**：富文本与手写模式通过胶囊切换按钮切换，默认进入键盘模式�?
- **富文本编辑区**：大面积白色输入面板支持基本富文本（标题、加粗、列表）；空时显示灰色提示文案�?
- **手写面板**：切换到手写模式后显�?Canvas 画布、撤销与清空按钮、笔触粗细调节滑杆；支援触控/鼠标绘制�?
- **行内标签展示**：编辑区下方实时列出当前笔记解析出的标签（彩色胶囊），并在侧边或底部显示已关联标签集合�?
- **状态栏**：底部显示最后修改时间、字数统计等信息�?

# 功能与交互逻辑

## 1. 标签核心功能
- **标签浏览**：首页标签云展示所有标签，按名称或使用频次排序，悬浮时显示相关笔记数�?
- **标签筛�?*：点击任意标签跳转到文件列表视图，仅展示包含该标签的笔记�?
- **标签同步**：新创建的标签需立即同步到首页云、编辑器关联列表以及列表筛选逻辑�?

## 2. 笔记创建与编�?
- **快速创�?*：在首页或列表视图点击右下角 FAB 即进入空白编辑器，默认处于“键盘模式”，并初始化保存状态为“草稿未保存”�?
- **富文本输�?*：支持基础格式（标题、段落、加粗、斜体、列表、引用），并保存为结构化数据�?
- **手写输入**：Canvas 支持自由书写、撤销、清空、笔触调节。手写数据应与文本分层存储，未来可导出为图像或矢量�?
- **状态反�?*：编辑器顶部显示保存/同步状态；输入变更后提示“草稿未保存”，保存成功后更新为“已保存”并刷新修改时间�?

## 3. 行内标签系统（Inline Tagging�?
- **标签识别**：用户输�?`#` + 非空格字符，遇到空格/回车后自动识别为标签并高亮渲染�?
- **标签创建**：识别出的新标签若在系统中不存在，则自动加入标签库并刷新首页云�?
- **标签关联**：每篇笔记维护关联标签集合；行内标签列表与底部“已关联标签”区域同步展示�?
- **标签编辑**：提供移除标签的交互（如在胶囊上点击小叉），移除后需更新笔记与标签关联关系�?

## 4. 导航与状态管�?
- **页面跳转**：三视图之间的切换保持过渡动画，确保用户明白当前所处层级�?
- **历史记录**：未来如引入前端路由（例�?`/tag/:name`、`/note/:id`），需与浏览器历史栈对齐以支持前进/后退�?
- **同步策略**：预留自动保存、离线存储与云端同步机制，界面上通过状态提示（如“同步中…”）反馈�?

# 数据与技术预�?
- **数据模型**：笔记实体包�?`id`、`title`、`content`（富文本）、`strokes`（手写向�?位图）、`tags`、`updatedAt` 等字段；标签实体包含 `id`、`name`、`colorToken`、`noteCount`�?
- **前端实现建议**：优先使用原�?JS + Canvas 完成原型；后续可引入 Vite、现代框架（React/Vue/Svelte）以及富文本库（TipTap/Quill）�?
- **后端接口规划**：提供标签列表、按标签检索笔记、笔记增删改查、手写数据上传等 RESTful API，支持未来同步功能�?
- **性能与体�?*：手写面板需对高频指针事件进行节�?绘制优化；大规模标签云建议引入虚拟化或分批渲染�?

# 验收标准
- 首页、标签列表、笔记编辑器三大视图布局完整，核心组件与交互均可演示�?
- 行内标签解析、标签云刷新与笔记标签关联保持一致且无明显延迟�?
- 富文本与手写模式切换流畅，Canvas 基础操作正常�?
- 文案、样式、交互状态与本计划描述一致，为后续开发提供清晰基准�?
